
var util=require('../../utils/util.js')
var app = getApp()
Page({
  data:{
    imgUrls:[
      '../../image/swiper_img01.png',
      '../../image/swiper_img02.png',
    ],
    live:[],
    book:[],
    wonderful:[],
              
  },

  onLoad: function () {
    console.log('onLoad')
    this.getLive()
    this.getBook()
    this.getWonderful()
  },

  //精彩班夫动态加载
  lower: function (e) {
    wx.showNavigationBarLoading();
    var that = this;
    setTimeout(function(){wx.hideNavigationBarLoading();that.nextLoad();}, 1000);
    console.log("lower")
  },

  nextLoad: function(){
    wx.showToast({
      title: '加载中',
      icon: 'loading',
      duration: 4000
    })
    var next = util.getWonderfulNext();
    //console.log(next);
    this.setData({
      wonderful: this.data.wonderful.concat(next),
    });
    setTimeout(function(){
      wx.showToast({
        title: '加载成功',
        icon: 'success',
        duration: 2000
      })
    },3000)
  },

  //获取班夫生活数据
  getLive: function(){
    var live = util.getLive()
    var book = util.getBook()
    console.log("获取班夫生活数据")
    this.setData({
      live:live
    });
  },
  //获取班夫宝典数据
  getBook: function(){
    var book = util.getBook()
    console.log("获取班夫宝典数据")
    this.setData({
      book:book
    });
  },
  //获取精彩班夫数据
  getWonderful: function(){
    var wonderful = util.getWonderful()
    console.log("获取精彩班夫数据")
    this.setData({
      wonderful:wonderful
    });
  },
})