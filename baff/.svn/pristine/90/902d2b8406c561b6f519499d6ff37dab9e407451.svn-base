
var util=require('../../utils/util.js')
var app = getApp()
Page({
  data:{
    imgUrls:[
      '../../image/swiper_img01.png',
      '../../image/swiper_img02.png',
    ],
    book:[
      {id:'advention',name:'景点探险',color:'rgb(63,193,204)'},
      {id:'season',name:'季节活动',color:'rgb(255,183,22)'},
      {id:'tips',name:'旅游贴士',color:'rgb(130,189,65)'},
      {id:'mark',name:'名词标示',color:'rgb(0,148,131)'},
    ],
    wonderful:[],
    swiperCurrent:0     
  },

  onLoad: function () {
    console.log('onLoad')
    this.getWonderful()
  },

  //轮播
  swiperChange: function(e){
    console.log("1111")
    this.setData({  
        swiperCurrent: e.detail.current  
    })  
},

  //精彩班夫动态加载
  lower: function (e) {
    wx.showNavigationBarLoading();
    var that = this;
    setTimeout(function(){wx.hideNavigationBarLoading();that.nextLoad();}, 1000);
    console.log("lower")
  },

  nextLoad: function(){
    wx.showToast({
      title: '加载中',
      icon: 'loading',
      duration: 4000
    })
    var next = util.getWonderfulNext();
    //console.log(next);
    this.setData({
      wonderful: this.data.wonderful.concat(next),
    });
    setTimeout(function(){
      wx.showToast({
        title: '加载成功',
        icon: 'success',
        duration: 2000
      })
    },3000)
  },

  //获取精彩班夫数据
  getWonderful: function(){
    var wonderful = util.getWonderful()
    console.log("获取精彩班夫数据")
    this.setData({
      wonderful:wonderful
    });
  },
})